module nema34_stepper(h=75, shaft=12.7, shaft_len=32, orient=ORIENT_Z, align=V_DOWN)
{
	size = 34;
	motor_width = nema_motor_width(size);
	plinth_height = nema_motor_plinth_height(size);
	plinth_diam = nema_motor_plinth_diam(size);
	screw_spacing = nema_motor_screw_spacing(size);
	screw_size = nema_motor_screw_size(size);
	screw_depth = nema_motor_screw_depth(size);

	screw_inset = motor_width - screw_spacing + 1;
	orient_and_align([motor_width, motor_width, h], orient, align, orig_align=V_DOWN) {
		difference() {
			union() {
				color([0.4, 0.4, 0.4])
					cuboid(size=[motor_width, motor_width, h], chamfer=2, edges=EDGES_Z_ALL, align=V_DOWN);
				color([0.4, 0.4, 0.4])
					cylinder(h=plinth_height, d=plinth_diam);
				color("silver")
					cylinder(h=shaft_len, d=shaft, $fn=max(24,segs(shaft/2)));
			}
			color([0.4, 0.4, 0.4]) {
				xspread(screw_spacing) {
					yspread(screw_spacing) {
						cylinder(d=screw_size, h=screw_depth*3, center=true, $fn=max(12,segs(screw_size/2)));
						down(screw_depth) downcube([screw_inset, screw_inset, h]);
					}
				}
			}
		}
	}
}



// Section: Masking Modules



// Module: nema_mount_holes()
// Description: Creates a mask to use when making standard NEMA stepper motor mounts.
// Arguments:
//   size = The standard NEMA motor size to make a mount for.
//   depth = The thickness of the mounting hole mask.  Default: 5
//   l = The length of the slots, for making an adjustable motor mount.  Default: 5
//   slop = The printer-specific slop value to make parts fit just right.  Default: `PRINTER_SLOP`
//   orient = Orientation of the stepper.  Use the `ORIENT_` constants from `constants.scad`.  Default: `ORIENT_Z`.
//   align = Alignment of the stepper.  Use the `V_` constants from `constants.scad`.  Default: `V_CENTER`.
// Example:
//   nema_mount_holes(size=14, depth=5, l=5);
// Example:
//   nema_mount_holes(size=17, depth=5, l=5);
// Example:
//   nema_mount_holes(size=17, depth=5, l=0);