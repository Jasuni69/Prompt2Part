module led_bezel(type) { //! Makes the STL for the bezel
    led = led_bezel_led(type);
    stl(str(led[0],"_bezel")) {
        wall = led_bezel_wall(type);
        if(is_num(led_diameter(led))) {
            rl = led_diameter(led) / 2;
            rr = led_rim_dia(led) / 2;
            poly_tube(or = rr + wall + led_bezel_flange(type), ir = rl, h = led_bezel_flange_t(type));              // Flange
            poly_tube(or = rl + wall,                          ir = rl, h = led_height(led) - rl - led_rim_t(led)); // Tube up to LED flange
            poly_tube(or = corrected_radius(rr) + wall,        ir = rr, h = led_bezel_height(type));                // Tube beyond the flange
        }
        else {
            linear_extrude(led_bezel_flange_t(type))        // Flange
                difference() {
                    offset(wall + led_bezel_flange(type))
                        square(led_rim_dia(led), true);

                    square(led_diameter(led), true);
                }

            linear_extrude(led_height(led) - led_rim_t(led)) // Tube up to the LED flange
                difference() {
                    offset(wall)
                        square(led_diameter(led), true);

                    square(led_diameter(led), true);
                }

            linear_extrude(led_bezel_height(type)) // Tube beyond the LED flange
                difference() {
                    offset(wall)
                        square(led_rim_dia(led), true);

                    square(led_rim_dia(led), true);
                }
        }
    }
}