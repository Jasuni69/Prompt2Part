module hex_socket2(d1,d2,b,k,s,t_min,L,l){
	h_unthreaded = (l<= L) ? 0 : l - b;
	h_threaded = (l<= L) ? l : b;

	BOLTS_check_dimension_positive(h,"l too short");

	difference(){
		union(){
			//Head
			translate([0,0,-k]) cylinder(r=d2/2,h = k);
			//unthreaded shaft
			cylinder(r=d1/2,h=h_unthreaded);
			//threaded shaft
			#translate([0,0,h_unthreaded]) BOLTS_thread_external(d1,h_threaded);
		}
		translate([0,0,-k]) BOLTS_hex_socket_neg(t_min,s);
	}
}