module nema_mount_mask(size, depth=5, l=5, atype="full", anchor=CENTER, spin=0, orient=UP)
{
    slop = get_slop();
    info = nema_motor_info(size);
    motor_width   = info[0];
    plinth_height = info[1];
    plinth_diam   = info[2] + slop;
    screw_spacing = info[3];
    screw_size    = info[4] + slop;
    screw_depth   = info[5];
    shaft_diam    = info[6];
    screwfn = quantup(max(8,segs(screw_size/2)),4);
    plinthfn = quantup(max(8,segs(plinth_diam/2)),4);
    s = atype=="full"? [screw_spacing+screw_size, screw_spacing+screw_size+l, depth] :
        atype=="screws"? [screw_spacing, screw_spacing, depth] :
        assert(in_list(atype, ["full", "screws"]));
    attachable(anchor,spin,orient, size=s) {
        union() {
            xcopies(screw_spacing) {
                ycopies(screw_spacing) {
                    if (l > 0) {
                        ycopies(l) cyl(h=depth, d=screw_size, $fn=screwfn);
                        cube([screw_size, l, depth], center=true);
                    } else {
                        cyl(h=depth, d=screw_size, $fn=screwfn);
                    }
                }
            }
            if (l > 0) {
                ycopies(l) cyl(h=depth, d=plinth_diam, $fn=plinthfn);
                cube([plinth_diam, l, depth], center=true);
            } else {
                cyl(h=depth, d=plinth_diam, $fn=plinthfn);
            }
        }
        children();
    }
}



// Section: Functions


// Function: nema_motor_info()
// Synopsis: Returns dimension info for a given NEMA motor size.
// Topics: Parts, Motors
// See Also: nema_stepper_motor(), nema_mount_mask()
// Usage:
//   info = nema_motor_info(size);
// Description:
//   Gets various dimension info for a NEMA stepper motor of a specific size.
//   Returns a list of scalar values, containing, in order:
//   - MOTOR_WIDTH: The full width and length of the motor.
//   - PLINTH_HEIGHT: The height of the circular plinth on the face of the motor.
//   - PLINTH_DIAM: The diameter of the circular plinth on the face of the motor.
//   - SCREW_SPACING: The spacing between screwhole centers in both X and Y axes.
//   - SCREW_SIZE: The diameter of the screws.
//   - SCREW_DEPTH: The depth of the screwholes.
//   - SHAFT_DIAM: The diameter of the motor shaft.
// Arguments:
//   size = The standard NEMA motor size.