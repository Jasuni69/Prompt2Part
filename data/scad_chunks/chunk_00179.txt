module circlips(all = false)
    layout([for(c = circlips) circlip_d3(c)], 5, false) let(c = circlips[$i]) {
        gap = circlip_d3(c) + 2;

        internal_circlip(c, 1);

        if(all) {
            translate([0, gap])
                internal_circlip(c, 0);

            translate([0, 2 * gap])
                internal_circlip(c, -1);
        }
    }

if($preview)
    circlips(true);