module crystal_ball(radius, theta = 360, phi = 180, thickness) {
    phis = is_num(phi) ? [0, phi] : phi;
    
    frags = __frags(radius);

    angle  = [90 - phis[1], 90 - phis[0]];

    shape_pts = is_undef(thickness) ? 
        shape_pie(
            radius, 
            angle , 
            $fn = __nearest_multiple_of_4(frags)
        ) :
        shape_arc(
            radius, 
            angle, 
            width = thickness,
            width_mode = "LINE_INWARD",
            $fn = __nearest_multiple_of_4(frags)
        );

    ring_extrude(
        shape_pts, 
        angle = theta, 
        radius = 0, 
        $fn = frags
    );

    // hook for testing
    test_crystal_ball_pie(shape_pts);
}

// override it to test