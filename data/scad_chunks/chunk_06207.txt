function _validate_nut_spec(spec) =
   let(
       //dummy=echo_struct(spec,"Screw Specification"),
       systemOK = in_list(struct_val(spec,"system"), ["UTS","ISO"]),
       diamOK = _is_positive(struct_val(spec, "diameter")),
       pitch = struct_val(spec,"pitch"),
       pitchOK = is_undef(pitch) || (is_num(pitch) && pitch>=0),
       shape = struct_val(spec, "shape"),
       shapeOK = shape=="hex" || shape=="square",
       thicknessOK = _is_positive(struct_val(spec, "thickness")),
       widthOK = _is_positive(struct_val(spec, "width"))
    )
    assert(systemOK, str("Nut spec has invalid \"system\", ", struct_val(spec,"system"), ".  Must be \"ISO\" or \"UTS\""))
    assert(diamOK, str("Nut spec has invalid \"diameter\", ", struct_val(spec,"diameter")))
    assert(pitchOK, str("Nut spec has invalid \"pitch\", ", pitch))
    assert(shapeOK, str("Nut spec has invalid \"shape\", ", shape, ".  Must be \"square\" or \"hex\""))
    assert(thicknessOK, str("Nut spec thickness is not a postive number: ",struct_val(spec,"thickness")))
    assert(widthOK, str("Nut spec width is not a postive number: ",struct_val(spec,"width")))
    spec;