function nextCells(maze, cell, dir) = 
    let(
	    inward = get_inward(cell), 
		outwards = get_outwards(cell),
		cw = get_cw(cell), 
		ccw = get_ccw(cell)
	)
	dir == 0 ? (is_undef(inward) ? [] : [cell_from(maze, inward)]) :
	dir == 1 ? (is_undef(outwards) ? [] : [for(outward = outwards) cell_from(maze, outward)]) :
	dir == 2 ? (is_undef(cw) ? [] : [cell_from(maze, cw)]) :
	           (is_undef(ccw) ? [] : [cell_from(maze, ccw)]);