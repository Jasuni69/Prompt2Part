module horicylinder(r, z, h = 0, center = true) { //! For making horizontal cylinders that don't need support material and are correct dimensions
    bot_layer = floor((z - r) / layer_height);
    top_layer = ceil((z + r) / layer_height);
    render(convexity = 5)
        extrude_if(h, center)
            for(i = [bot_layer : top_layer]) {
                Z = i * layer_height;
                y = Z - z + layer_height / 2;
                x = teardrop_minus_x(r, y, layer_height);
                if(x >= extrusion_width)
                    hull()
                        for(end = [-1, 1])
                            translate([end * (x - layer_height / 2), y])
                                circle(d = layer_height, $fn = 32);
             }
}