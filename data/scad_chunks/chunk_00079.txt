module knobs(show_pot = false)
    layout([for(p = potentiometers) pot_size(p).x], 5) let(p = potentiometers[$i])
        if($preview) {
            translate_z(z)
                knob_assembly(knobs[$i]);

            if(show_pot)
                translate_z(-thickness)
                    vflip() {
                        potentiometer(p, shaft_length = shaft_length);

                        translate_z(-thickness)
                            pot_nut(p);
                    }
        }
        else
            knob(knobs[$i]);


knobs(true);