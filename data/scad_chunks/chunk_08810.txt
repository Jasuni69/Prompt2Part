function _cells_lt_before_intersection(shape, size, points, pt, half_region_size) =
    [
        for(p = points)
            let(
                v = p - pt,
                nv = v / norm(v),
                off = (pt + p) / 2 - nv * half_region_size,
                cosa = nv.x,
                sina = nv.y,
                m = [[cosa, -sina], [sina, cosa]] 
            )
            [
                for(sp = shape)
                m * sp + off
            ]
    ];