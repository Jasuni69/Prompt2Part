function modang(x) =
    assert( is_finite(x), "\nInput must be a finite number.")
    let(xx = posmod(x,360)) xx<180? xx : xx-360;


// Function: mean_angle()
// Synopsis: Returns the mean angle of two angles
// Topics: Math
// See Also: modang()
// Usage:
//   half_ang = mean_angle(angle1,angle2);
// Description:
//   Takes two angles (degrees) in any range and finds the angle halfway between
//   the given angles, where halfway is interpreted using the shorter direction.
//   In the case where the angles are exactly 180 degrees apart,
//   it returns `angle1+90`.  The returned angle is always in the interval [0,360).  
// Arguments:
//   angle1 = first angle
//   angle2 = second angle