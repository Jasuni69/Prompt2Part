module fillet_cylinder_mask(r=1.0, fillet=0.25, xtilt=0, ytilt=0)
{
	skew_xz(za=xtilt) {
		skew_yz(za=ytilt) {
			cylinder_mask(l=fillet*3, r=r, fillet2=fillet, overage=fillet+2*r*sin(max(xtilt,ytilt)), ends_only=true, align=V_DOWN);
		}
	}
}



// Module: fillet_hole_mask()
// Usage:
//   fillet_hole_mask(r|d, fillet, [xtilt], [ytilt]);
// Description:
//   Create a mask that can be used to round the edge of a circular hole.
//   Difference it from the hole to be filletted.  The center of the
//   mask object should align exactly with the center of the end of the
//   hole to be filletted.
// Arguments:
//   r = Radius of hole to fillet.
//   d = Diameter of hole to fillet.
//   fillet = Radius of the filleting. (Default: 0.25)
//   xtilt = Angle of tilt of end of cylinder in the X direction. (Default: 0)
//   ytilt = Angle of tilt of end of cylinder in the Y direction. (Default: 0)
//   overage = The extra thickness of the mask.  Default: `0.1`.
// Example:
//   difference() {
//     cube([150,150,100], center=true);
//     cylinder(r=50, h=100.1, center=true);
//     up(50) #fillet_hole_mask(r=50, fillet=10);
//   }
// Example:
//   fillet_hole_mask(r=40, fillet=20, $fa=2, $fs=2);