function vx_polyline(points) =
    let(
        is_2d = len(points[0]) == 2,
        pts = is_2d ? [for(pt = points) __to3d(pt)] : points,
        polyline = [for(line =  __lines_from(pts)) each vx_line(line[0], line[1])]
    )
    dedup(
        is_2d ? [for(pt = polyline) __to2d(pt)] : polyline, 
        hash = is_2d ? _pt2_hash : _pt3_hash
    );