module buildMeshFromPointLayers(pointLayers = [], sides = true, bottom=true, top=true, closed=true, faces=[]){
    n = len(pointLayers[0]);
    pts = [for (deck=[0:1:len(pointLayers)-1]) each pointLayers[deck]];
	side_faces = [for (d = [0:1:len(pointLayers)-2], p = [0:1:len(pointLayers[d])-(closed? 1 : 2)])	let(c = (n * d)+ p, last=p+1==len(pointLayers[d]) ) [c,last? d*n: c+1, last? c+1 : c+n+1, c+n]];
    bottom_faces = bottom? [[for(i=[n-1:-1:0]) i]] : [];
    top_faces = top? [[for(i=[len(pts) - n:len(pts)-1]) i]] : [];
	polyhedron(points = pts, faces = concat(side_faces, bottom_faces, top_faces, faces), convexity = 10);
}