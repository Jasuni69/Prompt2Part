module rod_ends(list = rod_ends) {
    diameters = [for(b = list) rod_end_bearing_od(b)];
    max = max(diameters);
    layout(diameters) let(b = list[$i])
        rod_end_bearing(list[$i]);
}

if($preview)
    rod_ends();