function round_to_layer(z) =  //! Round up to a layer boundary using `layer_height0` for the first layer and `layer_height` for subsequent layers.
    z <= 0 ? 0 :
    z <= layer_height0 ? layer_height0 :
    ceil((z -layer_height0) / layer_height) * layer_height + layer_height0;